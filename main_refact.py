import random
import time
import threading
from datetime import timedelta


class Words:
    words = [
        "–∫–æ–º–ø—å—é—Ç–µ—Ä", "–ø—Ä–æ–≥—Ä–∞–º–º–∞", "–∞–ª–≥–æ—Ä–∏—Ç–º", "–±–∏–±–ª–∏–æ—Ç–µ–∫–∞", "—Ñ—É–Ω–∫—Ü–∏—è",
        "–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è", "—Ü–∏–∫–ª", "—É—Å–ª–æ–≤–∏–µ", "—Å–ø–∏—Å–æ–∫", "—Å–ª–æ–≤–∞—Ä—å",
        "–º–æ–¥—É–ª—å", "–∫–ª–∞—Å—Å", "–æ–±—ä–µ–∫—Ç", "–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å", "–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö",
        "—Å–µ—Ä–≤–µ—Ä", "–∫–ª–∏–µ–Ω—Ç", "–∏–Ω—Ç–µ—Ä–Ω–µ—Ç", "–±—Ä–∞—É–∑–µ—Ä", "—Å–∞–π—Ç",
        "–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ", "–∏–≥—Ä–∞", "–≥—Ä–∞—Ñ–∏–∫–∞", "–∞–Ω–∏–º–∞—Ü–∏—è", "–∑–≤—É–∫",
        "—Ñ–∞–π–ª", "–ø–∞–ø–∫–∞", "—Å–∏—Å—Ç–µ–º–∞", "–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å", "–ø–∞—Ä–æ–ª—å",
        "–∫–æ—Ñ–µ", "—Ç–µ–ª–µ—Ñ–æ–Ω", "—Å–æ–ª–Ω—Ü–µ", "–∫–Ω–∏–≥–∞", "—Ä—É—á–∫–∞",
        "–æ–∫–Ω–æ", "–¥–≤–µ—Ä—å", "—Å—Ç–æ–ª", "—Å—Ç—É–ª", "–ª–∞–º–ø–∞"
    ]
    def __init__(self):
        self.words = random.sample(self.words, len(self.words))

    def get_random_word(self):
        """–ü–æ–ª—É—á–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞"""
        if not self.words:
            return None
        return self.words.pop()



class EliasGame:
    def __init__(self, word_manager: Words):
        # –ë–∞–∑–∞ —Å–ª–æ–≤ –¥–ª—è –∏–≥—Ä—ã (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
        self.word_manager = word_manager
        self.score = 0
        self.game_active = False
        self.time_delay = 10
        self.end_time = None
    
    
    def start_game(self):
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å"""
        start_time = time.time()
        self.end_time = start_time + self.time_delay
        print("=== –î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í –ò–ì–†–£ '–≠–õ–ò–ê–°'! ===")
        print("–ü—Ä–∞–≤–∏–ª–∞: —É –≤–∞—Å –µ—Å—Ç—å 2 –º–∏–Ω—É—Ç—ã —á—Ç–æ–±—ã –æ–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–≤–∞.")
        print("–ö–æ–º–∞–Ω–¥—ã:")
        print("  'y' + Enter - —Å–ª–æ–≤–æ —É–≥–∞–¥–∞–Ω–æ (+1 –æ—á–∫–æ)")
        print("  'n' + Enter - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–ª–æ–≤–æ")
        print("  'quit' + Enter - –∑–∞–∫–æ–Ω—á–∏—Ç—å –∏–≥—Ä—É –¥–æ—Å—Ä–æ—á–Ω–æ")
        print("\n–ù–∞–∂–º–∏—Ç–µ Enter —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!")
        input()
        
        self.score = 0
        self.game_active = True
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
        # –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        self.game_loop()
        
        # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        self.show_results()
    
    # def timer(self, seconds=120):
    #     """–û—Ç—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –∏–≥—Ä—ã"""
    #     while  end_time > time.time():
    #         print("–æ—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏", (end_time - time.time()), end="\r", flush=True)
    #         time.sleep(1)
    #
    #     self.game_active = False
    #     print("\n\n–í—Ä–µ–º—è –≤—ã—à–ª–æ!")
    
    def game_loop(self):
        """–û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª"""
        while time.time() < self.end_time:
            new_word = self.word_manager.get_random_word()
            if new_word is None:
                print("–í—Å–µ —Å–ª–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã!")
                print(f"–°—á—ë—Ç: {self.score}")
                break
            
            print(f"–°—á—ë—Ç: {self.score}")
            print(f"\n–û–±—ä—è—Å–Ω–∏—Ç–µ —Å–ª–æ–≤–æ: {new_word.upper()}")
            
            # –ñ–¥–µ–º –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            print("–£–≥–∞–¥–∞–Ω–æ? (y/n/quit): ")
            user_input = input().strip().lower()
            
            if user_input == 'quit':
                self.game_active = False
                print("–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –¥–æ—Å—Ä–æ—á–Ω–æ.")
                break
            elif user_input == 'y':
                self.score += 1
                print("‚úì –í–µ—Ä–Ω–æ! +1 –æ—á–∫–æ")
            elif user_input == 'n':
                print("‚úó –ü—Ä–æ–ø—É—â–µ–Ω–æ")
            else:
                print("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥. –°–ª–æ–≤–æ –ø—Ä–æ–ø—É—â–µ–Ω–æ.")
            
            # –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —Å–ª–æ–≤–æ–º
            time.sleep(0.5)
    
    def show_results(self):
        """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã"""
        print("\n" + "=" * 40)
        print("–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê!")
        print(f"–í–∞—à –∏—Ç–æ–≥–æ–≤—ã–π —Å—á—ë—Ç: {self.score}")
        
        # –ü—Ä–æ—Å—Ç–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        if self.score >= 15:
            print("–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –º–∞—Å—Ç–µ—Ä –æ–±—ä—è—Å–Ω–µ–Ω–∏–π! üèÜ")
        elif self.score >= 10:
            print("–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üëç")
        elif self.score >= 5:
            print("–ù–µ–ø–ª–æ—Ö–æ! –ú–æ–∂–Ω–æ –ª—É—á—à–µ üòä")
        else:
            print("–ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–µ–ª–∞–µ—Ç –º–∞—Å—Ç–µ—Ä–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑! üí™")
            
# –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
if __name__ == "__main__":
    words = Words()
    game = EliasGame(words)
    
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Å–ª–æ–≤–∞
    # game.add_words(["–º–æ—ë_—Å–ª–æ–≤–æ", "–µ—â—ë_—Å–ª–æ–≤–æ"])
    
    game.start_game()
    
    # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑
    while True:
        again = input("\n–•–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑? (y/n): ").lower()
        if again == 'y':
            game.start_game()
        elif again == 'n':
            print("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
            break
        else:
            print("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ 'y' –∏–ª–∏ 'n'")